# ہفتہ 7: Gazebo کے ساتھ روبوٹ کی نقالی (جاری ہے)

ہفتہ 6 میں رکھی گئی بنیادوں پر تعمیر کرتے ہوئے، یہ ہفتہ Gazebo کے عملی پہلوؤں میں گہرائی میں جاتا ہے، جس میں جدید نقالی تکنیکوں، تفصیلی سینسر کنفیگریشن، اور ROS 2 کے ساتھ مضبوط انضمام پر توجہ مرکوز کی گئی ہے۔ ہمارا مقصد آپ کو پیچیدہ ہیومنائیڈ روبوٹکس تحقیق اور ترقی کے لیے نفیس نقلی ماحول بنانے اور ان کا انتظام کرنے کے قابل بنانا ہے۔

## جدید Gazebo خصوصیات اور ROS 2 انضمام

Gazebo کا موثر استعمال اکثر صرف ایک دنیا اور ایک روبوٹ کو لوڈ کرنے سے زیادہ کا مطالبہ کرتا ہے۔ ہم دریافت کریں گے کہ نقالی کے ساتھ متحرک طور پر کیسے تعامل کیا جائے، کسٹم طرز عمل کو نافذ کیا جائے، اور اپنے ROS 2 کنٹرول اسٹیک کے ساتھ بغیر کسی رکاوٹ کے ڈیٹا کے بہاؤ کو یقینی بنایا جائے۔

### Gazebo پلگ ان
پلگ ان متحرک لائبریریاں ہیں جو Gazebo کی فعالیت کو بڑھاتی ہیں۔ انہیں استعمال کیا جا سکتا ہے:
- **کسٹم سینسر ڈیٹا جنریشن**: پہلے سے طے شدہ طور پر دستیاب نہ ہونے والے خصوصی سینسر بنانا۔
- **روبوٹ کنٹرول انٹرفیس**: PID کنٹرولرز، انورس کائیمیٹکس سولوورز، یا براہ راست جوائنٹ فورس/ویلوسیٹی کمانڈز کا نفاذ۔
- **ماحولیاتی تعامل**: متحرک رکاوٹوں، ہوا، یا سیال حرکیات جیسی خصوصیات شامل کرنا۔
- **ROS 2 کنٹرول اور سینسر پلگ ان**: `gazebo_ros_pkgs` پلگ ان کا ایک اہم سیٹ فراہم کرتا ہے:
    - `libgazebo_ros_force_system.so`: لنکس پر قوتیں/ٹارک لگاتا ہے۔
    - `libgazebo_ros_diff_drive.so`: تفریق ڈرائیو روبوٹس کے لیے (ہیومنائیڈز کی پہیوں والی بنیادوں کے لیے مفید)۔
    - `libgazebo_ros_joint_state_publisher.so`: ROS 2 کو مشترکہ حالتیں شائع کرتا ہے۔
    - `libgazebo_ros_camera.so`، `libgazebo_ros_depth_camera.so`، `libgazebo_ros_laser.so`: مختلف کیمروں اور LiDARs کی نقالی کرتا ہے، ROS 2 موضوعات پر ڈیٹا شائع کرتا ہے۔
    - `libgazebo_ros_imu_sensor.so`: IMU ڈیٹا کی نقالی کرتا ہے۔

یہ پلگ ان عام طور پر آپ کے روبوٹ کے SDF ماڈل کے اندر یا براہ راست ورلڈ فائل میں بیان کیے جاتے ہیں، ان کی قسم اور ان کے لیے درکار کسی بھی پیرامیٹر کی وضاحت کرتے ہیں۔

### نقالی کے ساتھ پروگراماتی طور پر تعامل
لانچ فائلوں کے علاوہ، آپ Gazebo کے ساتھ اس کے کمانڈ لائن ٹولز یا ROS 2 خدمات کے ذریعے تعامل کرسکتے ہیں:
- **`gzclient` / `gzserver`**: Gazebo کلائنٹ (GUI) اور سرور (فزکس انجن) کو الگ الگ چلایا جا سکتا ہے۔
- **`ros2 service call /gazebo/set_model_state <model_state_msg>`**: نقالی میں ماڈلز کو پروگراماتی طور پر منتقل کرنے یا دوبارہ ترتیب دینے کے لیے۔
- **`ros2 service call /gazebo/get_model_state <model_state_req>`**: ماڈلز کی حالت استفسار کرنے کے لیے۔
- **`ros2 service call /gazebo/pause_physics` / `unpause_physics`**: نقالی کے بہاؤ کو کنٹرول کرنے کے لیے۔

یہ پروگراماتی کنٹرول خودکار جانچ، کمک سیکھنے کے ماحول، اور متحرک منظرنامے بنانے کے لیے بہت ضروری ہے جہاں ماحول خود روبوٹ کے اعمال یا بیرونی واقعات کے جواب میں بدلتا ہے۔

## جدید سینسر نقالیوں کو ڈیزائن کرنا

موثر فزیکل اے آئی بنانے کے لیے، آپ کے نقلی سینسرز کو حقیقی دنیا کے ہم منصبوں کی قریب سے نقل کرنی چاہیے۔ اس میں شور، تاخیر، اور مخصوص سینسر کی خصوصیات کو ترتیب دینا شامل ہے۔

### شور ماڈلنگ
- **گاسی شور**: سینسر ریڈنگز میں عام تقسیم سے بے ترتیب قدریں شامل کرنا تاکہ برقی شور کی نقالی کی جا سکے۔
- **تعصب**: سینسر ریڈنگز میں ایک مستقل آفسیٹ۔
- **ڈرفٹ**: وقت کے ساتھ سینسر ریڈنگز میں سست تبدیلیاں۔
- **آؤٹ لائرز**: کبھی کبھار، غلط ریڈنگز۔

Gazebo کے سینسر پلگ ان اکثر آپ کو شور کے پیرامیٹرز کی وضاحت کرنے کی اجازت دیتے ہیں (جیسے، کیمروں کے لیے `gaussian_noise`، IMUs کے لیے `mean`، `stddev`)۔
**مثال (SDF میں IMU):**
```xml
<sensor name="imu_sensor" type="imu">
  <always_on>1</always_on>
  <update_rate>100</update_rate>
  <imu>
    <angular_velocity>
      <x>
        <noise type="gaussian">
          <mean>0.0</mean>
          <stddev>0.0002</stddev>
          <bias_mean>0.0000075</bias_mean>
          <bias_stddev>0.0000008</bias_stddev>
        </noise>
      </x>
      <!-- ... y اور z اجزاء ... -->
    </angular_velocity>
    <!-- ... لکیری سرعت، اورینٹیشن ... -->
  </imu>
  <plugin name="imu_plugin" filename="libgazebo_ros_imu_sensor.so">
    <ros>
      <namespace>/imu</namespace>
    </ros>
    <initial_orientation_as_reference>false</initial_orientation_as_reference>
  </plugin>
</sensor>
```

### تاخیر اور ڈیٹا کی شرحیں
- نقلی سینسر تاخیر بھی متعارف کرا سکتے ہیں اور مخصوص اپ ڈیٹ کی شرحوں پر کام کر سکتے ہیں، بالکل حقیقی سینسرز کی طرح۔ ان پیرامیٹرز کو طبعی ہارڈ ویئر کی خصوصیات سے ملنے کے لیے ترتیب دیا جا سکتا ہے۔
- کیمروں کے لیے، ریزولوشن اور فریم کی شرح حقیقت پسندی اور حسابی بوجھ پر نمایاں طور پر اثر انداز ہوتی ہے۔

### کسٹم سینسر کی ترقی (جدید)
انتہائی خصوصی سینسرز کے لیے، آپ کو اپنے Gazebo سینسر پلگ ان تیار کرنے کی ضرورت پڑسکتی ہے۔ اس میں C++ کوڈ لکھنا شامل ہے جو Gazebo کے API کے ساتھ انٹرفیس کرتا ہے:
1. نقالی کی حالت پڑھنا (جیسے، ماڈل کی پوزیشنیں، روشنی کے ذرائع)۔
2. کسٹم حسابات انجام دینا (جیسے، آبجیکٹ کے درجہ حرارت کی بنیاد پر تھرمل کیمرے کی نقالی کرنا)۔
3. نتیجے میں آنے والے ڈیٹا کو ROS 2 موضوع پر شائع کرنا۔

## طبیعیات کی کنفیگریشن اور حقیقت پسندی

طبیعیات کے پیرامیٹرز کو ٹھیک کرنا حقیقت پسندانہ روبوٹ کے رویے کے لیے بہت ضروری ہے، خاص طور پر دو ٹانگوں والے ہیومنائیڈز کے لیے۔

### رابطہ پیرامیٹرز
- **رگڑ**: `mu1`، `mu2` (سطحوں اور رابطوں کے لیے جامد اور متحرک رگڑ کے گتانک)۔
- **بحالی**: تصادم کی اچھال۔
- **رابطہ سلپ**: کوئی چیز رابطے کے دوران سطح پر کتنا پھسل سکتی ہے۔

### مشترکہ حرکیات
- **ڈیمپنگ**: رفتار کے متناسب مشترکہ حرکت کے خلاف مزاحمت۔
- **رگڑ**: رفتار سے آزاد مشترکہ حرکت کے خلاف مزاحمت۔
- **اسپرنگ حوالہ جات**: اسپرنگ سے لدے جوڑوں کے لیے۔

یہ پیرامیٹرز آپ کی SDF/ورلڈ فائلوں کے `ode` یا دیگر طبیعیات کے انجن کے حصوں میں بیان کیے گئے ہیں۔ انہیں ٹھیک کرنے سے چلنے کے استحکام، آبجیکٹ کی ہیرا پھیری، اور مجموعی نقالی کی مخلصی پر ڈرامائی طور پر اثر پڑ سکتا ہے۔

### عالمی طبیعیات کی ترتیبات
- **کشش ثقل**: تبدیل کی جاسکتی ہے (جیسے، چاند کی نقالیوں کے لیے)۔
- **طبیعیات کے انجن کی قسم**: ODE، Bullet، وغیرہ کے درمیان سوئچ کرنے سے مختلف کارکردگی/درستگی کے تجارت کی پیشکش کی جاسکتی ہے۔
- **اپ ڈیٹ کی شرح**: وہ تعدد جس پر طبیعیات کا انجن حساب لگاتا ہے۔ ایک اعلی شرح عام طور پر زیادہ درستگی کا مطلب ہے لیکن زیادہ حسابی لاگت۔

## Gazebo نقالی کے لیے بہترین طریقے

- **ماڈیولر ماڈلز**: پیچیدہ روبوٹس یا ماحول کو چھوٹے، دوبارہ قابل استعمال SDF/URDF ٹکڑوں میں تقسیم کریں (اکثر XACRO کا استعمال کرتے ہوئے)۔
- **کم سے کم دنیا**: نقالیوں کو ہلکا پھلکا رکھنے کے لیے اپنی ورلڈ فائلوں میں صرف ضروری عناصر شامل کریں۔
- **میش کو بہتر بنائیں**: تصادم کا پتہ لگانے کے لیے آسان میش ماڈلز کا استعمال کریں، صرف بصری کے لیے اعلی ریزولوشن میشز کو محفوظ رکھیں۔
- **مستقل اکائیاں**: یقینی بنائیں کہ تمام ماڈلز اور کنفیگریشنز ایک مستقل اکائی کے نظام پر عمل پیرا ہیں (جیسے، میٹر، کلوگرام، سیکنڈ)۔
- **ورژن کنٹرول**: تمام روبوٹ ماڈلز، ورلڈ فائلیں، اور کنفیگریشن کو ورژن کنٹرول کے تحت رکھیں۔
- **پیرامیٹرائزیشن**: مختلف روبوٹ کنفیگریشنز یا عالمی ترتیبات کے درمیان آسانی سے سوئچ کرنے کے لیے لانچ فائلوں میں پیرامیٹرز کا استعمال کریں۔

ان تکنیکوں میں مہارت حاصل کرکے، آپ اپنے ہیومنائیڈ روبوٹس کے لیے انتہائی حقیقت پسندانہ اور مفید نقلی ماحول بنانے کے قابل ہو جائیں گے، جو آپ کے ترقیاتی دور کو نمایاں طور پر تیز کرے گا اور ان تجربات کو قابل بنائے گا جو حقیقی دنیا میں ناقابل عمل یا خطرناک ہوں گے۔
